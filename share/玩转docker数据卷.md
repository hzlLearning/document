# 玩转docker数据卷

## 为什么要用数据卷
我们都知道我们使用docker，并不是真的要在docker中开发。而是被他高效的虚拟化所吸引。比如我是做php开发的使用docker中
的nginx+php+centos。这里nginx和php是跑在容器里的。然后后的代码在物理机上。我每次改代码使用的是物理机上漂亮的编辑器
（emacs大法好，我是spacemacs小校草）。而由于docker可以支持一个网络空间，我数据库可以是物理机上的也可以是网络中的。
这样我就可以在物理机中开发和测试了。关于docker配置网络我们以后再讲。那么我们看看怎么使用docker的数据卷。
## 教程和解释
### 建立数据卷容器
其实我们都是看的网上的教材，docker从入门到放弃。我不过是对上面的代码解释一番，先看看建立数据卷容器的指令：
```
docker run -v /Users/zhouzihao/MyCodes:/mycode --name mydata zhouzihao/centos /bin/bash
*******[1]*[2]*[3]*******************[4]*[5]*****[6]***[7]****[8]**************[9]*****
```
好的不要急我们一个一个的解释：  
[1] 这个其实没啥好解释的在docker命令行中使用一个镜像运行一个容器的指令  
[2] 这个是容器中挂载一个目录的参数  
[3] 这个地址是你在物理机中共享文件夹的绝对地址  
[4] 就是这种写法，你可以理解为挂载行文吧  
[5] 这个是挂载在容器中的绝对地址  
[6] 开启一个容器的时为这个容器命名  
[7] 这个容器的名称，以后有用的  
[8] 开启容器时的镜像的名称  
[9] 容器运行的镜像中的程序
### 使用数据卷容器
诶？我建立完了怎么没效果啊？这就完了？  
对！完了就完了。当你运行完之后数据卷就在后台运行了。不信的话可以运行
`docker ps -a`进行查看。你会发现你新建的容器已经在运行了。现在让我们用起来：  
```
docker run -it --volumes-from mydata zhouzihao/centos /bin/bash
```
这个不需要我一个一个参数介绍了吧。看看有用的：  
-it ：这也是run的一个参数，是打开一个可以交互的容器  
--volumes-from : 注意这里是重点哦。这个是当前容器使用数据卷的参数，后面那个紧跟的是之前定义好的数据卷的名称  
### 检验
现在你就可以看到在你的`/mycode`下有你物理机的所有内容，而且这里的读写都是同步的哦。
> 分享一个小技巧，你可以把一些配置性的文件做成数据卷，比如nginx中的虚拟主机的配置等，这样你就可以方便的更改他们以达到不进入docker容器的目的，就像她不存在一样。
> 有诗云：我喜欢你是安静的，就好像我消失了一样。：）
## 鸣谢
谢谢！docker的开发者们和他们文档的翻译这让我们用到这门好的软件。
